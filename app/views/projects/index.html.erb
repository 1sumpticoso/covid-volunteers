<%- share_title @page_title %>

<%= render partial: 'categories-nav' if is_category_path %>

<div class="container">
  <%= render partial: 'category-info' if is_category_path %>
  <%= render partial: 'partials/featured-projects', locals: {projects: @featured_projects, category: @project_category[:name]} if is_category_path %>
  <%= render partial: 'filters-bar' if @show_filters %>

  <div class="bg-white px-4 py-5 sm:px-6 mb-4 sm:rounded-md my-4">
    <div class="-ml-4 -mt-4 flex justify-between items-center flex-wrap sm:flex-no-wrap">
      <div class="ml-4 mt-4">
        <h3 class="text-lg leading-6 font-medium text-gray-900">
          <%= @projects_header %>
        </h3>
        <p class="mt-1 text-sm leading-5 text-gray-500">
          <%= @projects_subheader %>
          <% if current_user.blank? %>
            <%= link_to 'Sign up', new_user_registration_path, class: 'text-indigo-500' %> to volunteer.
          <% elsif !current_user.has_complete_profile? %>
            <%= link_to 'Fill out your profile', edit_user_registration_path, class: 'text-indigo-500' %> to volunteer.
          <% end %>
        </p>
      </div>
      <div class="ml-4 mt-4 flex-shrink-0">
        <span class="inline-flex rounded-md shadow-sm">
          <%= link_to new_project_path do %>
            <button type="button" class="relative inline-flex items-center px-4 py-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo focus:border-indigo-700 active:bg-indigo-700">
              Create project
            </button>
          <% end %>
        </span>
      </div>
    </div>
  </div>

  <% if @projects.present? %>
    <div class="sm:rounded-md sm:grid grid-cols-2 md:grid-cols-3 gap-8 mb-4">
      <% @projects.each do |project| %>
        <%= render partial: 'project-card', locals: { project: project, category: @project_category[:name]} %>
      <% end %>
    </div>
    <%= paginate @projects %>
  <% end %>
</div>
